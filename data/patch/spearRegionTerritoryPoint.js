const { SystemInfo } = require('Data/version')
const spotCN = [
  {
    id: '2400',
    territories: [
      {
        id: '2408',
        spots: [
          {
            id: 477,
            fishList: [20194, 20195, 20205, 20214, 20223, 20235],
            order: 477,
          },
          {
            id: 478,
            fishList: [20196, 20195, 20206, 20215, 20224, 20236],
            order: 478,
          },
          {
            id: 479,
            fishList: [20197, 20207, 20208, 20216, 20225, 20237],
            order: 479,
          },
          {
            id: 483,
            fishList: [20214, 20224, 20223, 20225, 20238, 20239],
            order: 483,
          },
        ],
        order: 477,
      },
    ],
    order: 477,
  },
  {
    id: '2401',
    territories: [
      {
        id: '2409',
        spots: [
          {
            id: 464,
            fishList: [20144, 20145, 20154, 20162, 20163, 20171],
            order: 464,
          },
          {
            id: 465,
            fishList: [20144, 20146, 20155, 20164, 20172, 20179],
            order: 465,
          },
          {
            id: 466,
            fishList: [20147, 20155, 20156, 20165, 20173, 20180],
            order: 466,
          },
          {
            id: 467,
            fishList: [20147, 20145, 20157, 20166, 20174, 20181],
            order: 467,
          },
          {
            id: 468,
            fishList: [20148, 20158, 20156, 20167, 20175, 20182],
            order: 468,
          },
          {
            id: 472,
            fishList: [20186, 20198, 20199, 20209, 20217, 20226, 21179],
            order: 472,
          },
          {
            id: 480,
            fishList: [20174, 20179, 20209, 20217, 20210, 20227, 20528],
            order: 480,
          },
          {
            id: 530,
            fishList: [20165, 20174, 20171, 20209, 20226, 21180],
            order: 530,
          },
        ],
        order: 464,
      },
      {
        id: '2410',
        spots: [
          {
            id: 469,
            fishList: [20149, 20150, 20159, 20176, 20183, 20184],
            order: 469,
          },
          {
            id: 470,
            fishList: [20151, 20152, 20160, 20168, 20169, 20177],
            order: 470,
          },
          {
            id: 471,
            fishList: [20153, 20151, 20161, 20170, 20185, 20178],
            order: 471,
          },
          {
            id: 473,
            fishList: [20187, 20188, 20200, 20211, 20218, 20228],
            order: 473,
          },
          {
            id: 474,
            fishList: [20189, 20190, 20201, 20212, 20219, 20229],
            order: 474,
          },
          {
            id: 481,
            fishList: [20211, 20212, 20219, 20228, 20220, 20230],
            order: 481,
          },
        ],
        order: 469,
      },
      {
        id: '2411',
        spots: [
          {
            id: 475,
            fishList: [20191, 20192, 20202, 20213, 20221, 20231],
            order: 475,
          },
          {
            id: 476,
            fishList: [20193, 20203, 20204, 20213, 20232, 20222],
            order: 476,
          },
          {
            id: 482,
            fishList: [20221, 20222, 20232, 20231, 20233, 20234],
            order: 482,
          },
        ],
        order: 475,
      },
    ],
    order: 464,
  },
  {
    id: '2950',
    territories: [
      {
        id: '2953',
        spots: [
          {
            id: 635,
            fishList: [27517, 27518, 27520, 27522, 27519, 27521],
            order: 635,
          },
          {
            id: 636,
            fishList: [27516, 27523, 27524, 27525, 27527, 27526],
            order: 636,
          },
          {
            id: 637,
            fishList: [27528, 27529, 27533, 27530, 27531, 27532],
            order: 637,
          },
          {
            id: 645,
            fishList: [27518, 27519, 27523, 27525, 27534, 27535],
            order: 645,
          },
        ],
        order: 635,
      },
      {
        id: '2956',
        spots: [
          {
            id: 638,
            fishList: [27537, 27539, 27538, 27540, 27541, 27542],
            order: 638,
          },
          {
            id: 639,
            fishList: [27544, 27546, 27547, 27543, 27545, 27548],
            order: 639,
          },
          {
            id: 640,
            fishList: [27549, 27550, 27552, 27553, 27554, 27551],
            order: 640,
          },
          {
            id: 641,
            fishList: [27555, 27556, 27557, 27558, 27559, 27560],
            order: 641,
          },
          {
            id: 642,
            fishList: [27536, 27561, 27562, 27563, 27564, 27565],
            order: 642,
          },
          {
            id: 646,
            fishList: [27550, 27555, 27559, 27564, 27567, 27566],
            order: 646,
          },
        ],
        order: 638,
      },
      {
        id: '2957',
        spots: [
          {
            id: 643,
            fishList: [27568, 27569, 27570, 27571, 27572, 27573],
            order: 643,
          },
          {
            id: 644,
            fishList: [27577, 27574, 27576, 27575, 27578, 27579],
            order: 644,
          },
          {
            id: 647,
            fishList: [27571, 27576, 27581, 27573, 27579, 27580],
            order: 647,
          },
          {
            id: 696,
            fishList: [27574, 27570],
            order: 696,
          },
          {
            id: 697,
            fishList: [27574, 27570],
            order: 697,
          },
        ],
        order: 643,
      },
    ],
    order: 635,
  },
]
const spotGlobalAddon = [
  {
    id: 2400,
    territories: [
      {
        id: 2408,
        spots: [
          { id: 898, fishList: [36582, 36583, 36584, 36585, 36586, 36587], order: 898 },
        ],
        order: 898,
      },
    ],
    order: 898,
  },
  {
    id: 2401,
    territories: [
      {
        id: 2409,
        spots: [
          { id: 890, fishList: [36548, 36549, 36550, 36551, 36552, 36553], order: 890 },
          {
            id: 891,
            fishList: [36554, 36555, 36556, 36557, 36558, 36559],
            order: 891,
          },
          {
            id: 892,
            fishList: [36560, 36561, 36562, 36563, 36564, 36565, 36568],
            order: 892,
          },
          {
            id: 896,
            fishList: [36566, 36567, 36571, 36569, 36570, 36581, 36580],
            order: 896,
          },
          { id: 897, fishList: [36572, 36575, 36574, 36577, 36576, 36579], order: 897 },
          {
            id: 899,
            fishList: [36551, 36555, 36557, 36559, 36578, 36573],
            order: 899,
          },
        ],
        order: 890,
      },
    ],
    order: 890,
  },
  {
    id: 3703,
    territories: [
      {
        id: 3709,
        spots: [
          { id: 889, fishList: [36522, 36523, 36524, 36525, 36526, 36527], order: 889 },
          {
            id: 893,
            fishList: [36528, 36529, 36530, 36531, 36532, 36533],
            order: 893,
          },
          { id: 894, fishList: [36534, 36537, 36536, 36539, 36538, 36547], order: 894 },
          {
            id: 895,
            fishList: [36540, 36541, 36542, 36543, 36544, 36545],
            order: 895,
          },
          { id: 900, fishList: [36525, 36537, 36536, 36547, 36546, 36535], order: 900 },
        ],
        order: 889,
      },
    ],
    order: 889,
  },
]

const toDict = arr => {
  const dict = {}
  arr.forEach(it => {
    dict[it.id] = Object.assign({}, it)
  })
  return dict
}

const combineRegion = (dataCN, dataGlobalAddon) => {
  const dict = toDict(dataCN)
  dataGlobalAddon.forEach(region => {
    if (dict[region.id]) {
      dict[region.id].territories = combineTerritory(dict[region.id].territories, region.territories)
    } else {
      dict[region.id] = region
    }
  })
  return Object.values(dict)
}

const combineTerritory = (dataCN, dataGlobalAddon) => {
  const dict = toDict(dataCN)
  dataGlobalAddon.forEach(territory => {
    if (dict[territory.id]) {
      dict[territory.id].spots = dict[territory.id].spots.concat(
        territory.spots
      )
    } else {
      dict[territory.id] = territory
    }
  })
  return Object.values(dict)
}

console.log(spotCN)
const spotGlobal = combineRegion(spotCN, spotGlobalAddon)

module.exports = {
  CN: spotCN,
  Global: spotGlobal,
  getData() {
    return SystemInfo.region === 'CN' ? spotCN : spotGlobal
  },
}
