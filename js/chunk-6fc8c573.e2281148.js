(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["chunk-6fc8c573"],{"1f4f":function(t,e,s){"use strict";s("a9e3");var i=s("5530"),n=(s("8b37"),s("80d2")),a=s("7560"),o=s("58df");e["a"]=Object(o["a"])(a["a"]).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes:function(){return Object(i["a"])({"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom},this.themeClasses)}},methods:{genWrapper:function(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:Object(n["i"])(this.height)}},[this.$createElement("table",this.$slots.default)])}},render:function(t){return t("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}})},"8b37":function(t,e,s){},dd836:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-expansion-panels",{attrs:{hover:"",flat:"",tile:""},model:{value:t.lazyExpansionValue,callback:function(e){t.lazyExpansionValue=e},expression:"lazyExpansionValue"}},[s("v-expansion-panel",{staticClass:"system"},[s("v-expansion-panel-header",{staticClass:"system"},[s("div",{staticStyle:{display:"flex","justify-content":"center"}},[s("div",[s("v-icon",[t._v(t._s(t.mdiCalendar))]),t._v(" "+t._s(t.$t("countDown.fishWindowBtn"))+" ")],1)])]),s("v-expansion-panel-content",[0===t.fishWindowsToShow.length?s("div",{staticClass:"d-flex justify-center align-center",staticStyle:{height:"352px"}},[s("div",{staticClass:"d-flex align-center"},[s("v-icon",{attrs:{"x-large":""}},[t._v(t._s(t.mdiTableSearch))]),s("span",[t._v(t._s(t.$t("common.ui.loading")))])],1)]):s("v-simple-table",{staticClass:"system",attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[s("thead",[s("tr",[s("th",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("list.item.fishWindowTable.startTime"))+" ")]),s("th",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("list.item.fishWindowTable.interval"))+" ")]),s("th",{staticClass:"text-center"},[t._v(" "+t._s(t.$t("list.item.fishWindowTable.nextInterval"))+" ")])])]),s("tbody",t._l(t.fishWindowsToShow,(function(e,i){return s("tr",{key:i},[s("td",{staticClass:"text-center"},[t._v(t._s(e.start))]),s("td",{staticClass:"text-center"},[t._v(t._s(e.interval))]),s("td",{staticClass:"text-center"},[t._v(t._s(e.nextInterval))])])})),0)]},proxy:!0}])}),s("v-btn",{attrs:{block:"",loading:t.loadingShowMore,color:"primary"},on:{click:t.showMore}},[t._v(" "+t._s(t.$t("loadingMore"))+" ")])],1)],1)],1)},n=[],a=(s("4de4"),s("d81d"),s("fb6a"),s("5530")),o=s("2f62"),h=s("94ed"),l=s("1aeb"),r=s("bb45"),d={name:"DetailItemFishWindowTable",props:{fish:{type:Object,default:void 0},fishWeatherChangePart:{type:Object,default:function(){return{}}},expanded:{type:Boolean,default:!1}},data:function(t){return{mdiCalendar:h["r"],mdiTableSearch:h["Eb"],lazyExpansionValue:t.expanded?0:void 0,recordsCntToShow:r["a"].FISH_WINDOW_FORECAST_N,lazyFishWindows:[],fishWindowsToShow:[],loadingShowMore:!1}},created:function(){this.lazyExpansionValue=this.expanded?0:void 0},watch:{expanded:function(t){this.lazyExpansionValue=t?0:void 0},"fish.id":function(){this.lazyExpansionValue=this.expanded?0:void 0,this.recordsCntToShow=r["a"].FISH_WINDOW_FORECAST_N,this.lazyFishWindows=[],this.fishWindowsToShow=[]},now:function(t){if(this.recordsCntToShow===this.fishWindowsProvided.filter((function(e){return e.endTime>t})).length)this.fishWindowsToShow=this.fishWindowsProvided;else{var e=this.lazyFishWindows.filter((function(e){return e.endTime>t}));e.length>this.recordsCntToShow?this.fishWindowsToShow=e.slice(0,this.recordsCntToShow):e.length===this.recordsCntToShow?this.fishWindowsToShow=e:(this.fishWindowsToShow=this.lazyFishWindows=this.transformFishWindows(l["a"].getFishWindow(this.allFish[this.fish.id],t,this.allFish,this.fishingSpots,this.fishEyesUsed,this.recordsCntToShow),this.recordsCntToShow,t),this.loadingShowMore=!1)}}},computed:Object(a["a"])(Object(a["a"])({fishWindowsProvided:function(){return this.transformFishWindows(this.fishWeatherChangePart.fishWindows,r["a"].FISH_WINDOW_FORECAST_N,this.now)}},Object(o["e"])({allFish:"fish",fishingSpots:"fishingSpots",now:"now"})),Object(o["c"])(["fishEyesUsed"])),methods:{transformFishWindows:function(t,e,s){var i=this,n=t.filter((function(t){return t[1]>s}));return e>n.length&&console.warn("fish window cnt less than n",n.length,e),n=n.slice(0,Math.min(e,n.length)),n.map((function(t,e){var s=new Date(t[0]),a=new Date(t[1]);return{startTime:t[0],endTime:t[1],start:l["a"].formatDateTime(t[0]),end:l["a"].formatDateTime(t[1]),interval:i.printCountDownTime(a.getTime()-s.getTime()),nextInterval:e<n.length-1?i.printCountDownTime(n[e+1][0]-a.getTime()):""}}))},showMore:function(){this.loadingShowMore||(this.recordsCntToShow+=10,this.loadingShowMore=!0)},printCountDownTime:l["a"].printCountDownTime}},c=d,f=s("2877"),u=s("6544"),p=s.n(u),w=s("8336"),v=s("cd55"),m=s("49e2"),b=s("c865"),x=s("0393"),T=s("132d"),S=s("1f4f"),g=Object(f["a"])(c,i,n,!1,null,"7f2065bf",null);e["default"]=g.exports;p()(g,{VBtn:w["a"],VExpansionPanel:v["a"],VExpansionPanelContent:m["a"],VExpansionPanelHeader:b["a"],VExpansionPanels:x["a"],VIcon:T["a"],VSimpleTable:S["a"]})}}]);