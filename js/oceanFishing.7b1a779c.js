(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["oceanFishing"],{2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var n=i("6b75");function a(t){if(Array.isArray(t))return Object(n["a"])(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0");function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var r=i("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return a(t)||o(t)||Object(r["a"])(t)||s()}},"3bc4":function(t,e,i){},"5db7":function(t,e,i){"use strict";var n=i("23e7"),a=i("a2bf"),o=i("7b0b"),r=i("50c4"),s=i("1c0b"),c=i("65f0");n({target:"Array",proto:!0},{flatMap:function(t){var e,i=o(this),n=r(i.length);return s(t),e=c(i,0),e.length=a(e,i,i,n,0,1,t,arguments.length>1?arguments[1]:void 0),e}})},"73d9":function(t,e,i){var n=i("44d2");n("flatMap")},a2bf:function(t,e,i){"use strict";var n=i("e8b5"),a=i("50c4"),o=i("0366"),r=function(t,e,i,s,c,l,u,m){var v,f=c,h=0,d=!!u&&o(u,m,3);while(h<s){if(h in i){if(v=d?d(i[h],h,e):i[h],l>0&&n(v))f=r(t,e,v,a(v.length),f,l-1)-1;else{if(f>=9007199254740991)throw TypeError("Exceed the acceptable array length");t[f]=v}f++}h++}return f};t.exports=r},a9f6:function(t,e,i){"use strict";i("3bc4")},c944:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{class:"detail-wrapper "+(t.isMobile?"detail-wrapper-mobile":"detail-wrapper-pc")},[i("v-card",[i("v-card-title",[t._v("海钓航班时间表")]),i("v-card-subtitle",[t._v("努力号航运表")]),i("div",[i("ocean-fishing-time-table",{attrs:{voyages:t.voyages,targetOptions:t.targetOptions},on:{filterChanged:t.filterChanged}})],1)],1)],1)},a=[],o=(i("99af"),i("4de4"),i("5db7"),i("d81d"),i("73d9"),i("b0c0"),i("5530")),r=(i("a630"),i("d3b7"),i("6062"),i("3ca3"),i("ddb0"),i("2909")),s=i("60bb"),c=i.n(s),l=(i("caad"),i("a15b"),i("2532"),6e4),u=60*l,m=[0,1,2,3,4,5],v=[0,1,2,3,4,5,0,1,2,3,4,5,1,0,3,2,5,4,1,0,3,2,5,4,2,3,4,5,0,1,2,3,4,5,0,1,3,2,5,4,1,0,3,2,5,4,1,0,4,5,0,1,2,3,4,5,0,1,2,3,5,4,1,0,3,2,5,4,1,0,3,2];function f(t){var e=t-t%(2*u);return t%(2*u)<15*l?e:e+2*u}function h(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;null!=i&&0!==i.length||(i=m);for(var n=64,a=Math.floor(Math.floor(t/u)/2),o=t-t%(2*u),r=[],s=0;r.length<e;s++){var c=v[(a+n+s)%v.length];i.includes(c)&&r.push({time:o+2*s*u,voyageType:c})}return r}var d=["梅尔托尔海峡北","罗塔诺海海面","加拉迪翁湾外海","梅尔托尔海峡南"],p=["梅尔托尔海峡北航线","罗塔诺海航线"],g=["早","午","晚"],y=[[3,2,0],[2,3,1]],b={4:{voyageSimpleName:"梅晚",target:"海龙成就 + ※珊瑚蝠鲼",comment:"蝠鲼可以1区跳跳乐",voyageDetail:"梅尔托尔海峡南(夜) - 加拉迪翁湾外海(日) - 梅尔托尔海峡北(夕)"},5:{voyageSimpleName:"罗晚",target:"※索蒂斯 + ※石骨鱼",comment:"索蒂斯可以1区跳跳乐，2区可以冲海龙成就",voyageDetail:"加拉迪翁湾外海(夜) - 梅尔托尔海峡南(日) - 罗塔诺海海面(夕)"},0:{voyageSimpleName:"梅早",target:"章鱼成就",comment:"也比较适合冲分",voyageDetail:"梅尔托尔海峡南(日) - 加拉迪翁湾外海(夕) - 梅尔托尔海峡北(夜)"},1:{voyageSimpleName:"罗早",target:"水母成就 + 冲分推荐",comment:"由于水母成就相对简单，更建议梅午1区跳跳乐",voyageDetail:"加拉迪翁湾外海(日) - 梅尔托尔海峡南(夕) - 罗塔诺海海面(夜)"},2:{voyageSimpleName:"梅午",target:"※索蒂斯 + ※依拉丝莫龙",comment:"1区可以水母成就跳跳乐",voyageDetail:"梅尔托尔海峡南(夕) - 加拉迪翁湾外海(夜) - 梅尔托尔海峡北(日)"},3:{voyageSimpleName:"罗午",target:"鲨鱼成就 + ※珊瑚蝠鲼",comment:"可以和鲨鱼队一起冲分",voyageDetail:"加拉迪翁湾外海(夕) - 梅尔托尔海峡南(夜) - 罗塔诺海海面(日)"}},_=[{achievements:[2562,2563],comment:"最佳冲分航线，同时适合钓章鱼成就"},{achievements:[2562,2565],comment:"次佳冲分路线，同时适合钓水母成就"},{achievements:[],comment:"航线上有两条蓝鱼，没起蓝鱼的话冲分有些困难"},{achievements:[2562,2564],comment:"还不错的冲分航线，同时适合钓鲨鱼成就"},{achievements:[2566],comment:"比较一般的航线，同时适合钓海马成就"},{achievements:[],comment:"航线上有两条蓝鱼，除非欧皇小队起3条蓝鱼否则冲分会很困难"}],T={29791:{_id:29791,name_chs:"依拉丝莫龙",icon:28012},29790:{_id:29790,name_chs:"石骨鱼",icon:28011},29788:{_id:29788,name_chs:"索蒂斯",icon:28009},29789:{_id:29789,name_chs:"珊瑚蝠鲼",icon:28010}},O=[{blueFish:29791},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:29790},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:null},{blueFish:29788},{blueFish:29789}];function S(t){return t>>>1}function C(t){return t%2}function x(t,e){return(e<<2)+t}function N(t){return t%4}function F(t){return t>>>2}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return h(t,e,i).map((function(t){var e=t.voyageType,i=y[C(e)],n=S(e),a=i.map((function(t,e){var i=(n+e)%3;return{locationName:d[t],locationShift:i,locationHint:g[i],blueFish:O[x(t,i)].blueFish}}));return Object(o["a"])(Object(o["a"])(Object(o["a"])({},t),b[t.voyageType]),{},{voyageTip:_[e],locationTips:a,shift:{type:n,name:p[i[2]]}})}))}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:13,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m;return I(t,e,i).map((function(t){return{time:new Intl.DateTimeFormat("zh-Hans-CN",{formatMatcher:"basic",timeZone:"Asia/Shanghai",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).format(new Date(t.time)),name:t.voyageSimpleName,blueFish:t.locationTips.map((function(t){return T[t.blueFish]})).filter((function(t){return t})).map((function(t){return t.name_chs})).join("，"),achievements:t.voyageTip.comment}}))}var A={voyagesWithTipOf:I,simpleTipsOf:w,shiftTimeForCheckInLimit:f,voyageToShift:S,voyageToLocation:C,locationShiftIndexOf:x,locationShiftToLocation:N,locationShiftToShift:F,LOCATIONS:d,SHIFTS:g,LOCATION_SHIFT_TIPS:O,VOYAGE_TIPS:_,VOYAGE_TYPES:m,VOYAGE_LOCATIONS:y};function j(){return c.a.chain(A.VOYAGE_TYPES.flatMap((function(t){return A.VOYAGE_LOCATIONS[A.voyageToLocation(t)].map((function(e,i){return{voyage:t,locationShift:A.locationShiftIndexOf(e,(A.voyageToShift(t)+i)%3)}}))}))).uniq().groupBy("locationShift").mapValues((function(t){return t.map((function(t){return t.voyage}))})).value()}var L=j();function k(){var t=A.LOCATION_SHIFT_TIPS.map((function(t,e){return{locationShift:e,blueFish:t.blueFish}})).filter((function(t){return null!==t.blueFish})),e=c.a.chain(A.VOYAGE_TIPS.flatMap((function(t,e){return t.achievements.map((function(t){return{achievement:t,voyage:e}}))}))).groupBy("achievement").mapValues((function(t){return t.map((function(t){return t.voyage}))})).value(),i=new Set(A.VOYAGE_TIPS.flatMap((function(t){return t.achievements})));return[{type:"蓝鱼",options:t.map((function(t){return{type:"item",id:t.blueFish,voyageTypes:L[t.locationShift]}}))},{type:"成就",options:Array.from(i).map((function(t){return{type:"achievement",id:t,voyageTypes:e[t]}}))}].concat(Object(r["a"])(A.LOCATIONS.map((function(t,e){return{type:t,options:A.SHIFTS.map((function(i,n){var a=A.locationShiftIndexOf(e,n);return{type:"locationShift",id:A.locationShiftIndexOf(e,n),name:"".concat(t,"(").concat(i,")"),shift:n,voyageTypes:L[a]}}))}}))))}var M=Object(o["a"])(Object(o["a"])({},A),{},{allTargets:k}),D=i("1aeb"),E=i("1315"),P=i("2f62"),$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i(t.componentType,{tag:"component",attrs:{voyages:t.voyages,targetOptions:t.targetOptions,voyageN:t.voyageN,targets:t.targets},on:{filterChanged:t.filterChanged}})],1)},z=[],H=(i("a9e3"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-form",[i("v-container",[i("v-row",[i("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"3"}},[i("v-subheader",[t._v("显示航班数")]),i("v-text-field",{attrs:{type:"number",solo:""},model:{value:t.voyageN,callback:function(e){t.voyageN=e},expression:"voyageN"}})],1),i("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"7"}},[i("v-subheader",[t._v("筛选条件")]),i("v-autocomplete",{staticClass:"targetSelector",attrs:{items:t.selectionOptions,color:"blue-grey lighten-2",placeholder:t.$t("oceanFishing.targetFilterPlaceholder"),"item-text":"name","item-value":"id",filter:t.filterOptions,multiple:"",clearable:"",chips:"","deletable-chips":"","return-object":"",solo:"",attach:".targetSelector"},on:{input:t.targetsChanged},scopedSlots:t._u([{key:"item",fn:function(e){return[e.item.header?[i("v-list-item-content",{domProps:{textContent:t._s(e.item.header)}})]:"locationShift"!==e.item.type?[i("v-list-item-content",[i("div",{staticClass:"d-flex align-center"},[i("item-icon",{attrs:{title:e.item.name,"icon-url":e.item.iconUrl,"icon-class":e.item.icon,type:e.item.type}}),i("div",[t._v(" "+t._s(e.item.name)+" ")])],1)])]:i("div",{staticClass:"d-flex align-center"},[i("v-icon",{staticClass:"mr-1"},[t._v(" "+t._s(e.item.icon)+" ")]),i("div",[t._v(" "+t._s(e.item.name)+" ")])],1)]}}]),model:{value:t.targets,callback:function(e){t.targets=e},expression:"targets"}})],1)],1)],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[i("colgroup",[i("col",{staticStyle:{width:"15%"},attrs:{span:"1"}}),i("col",{staticStyle:{width:"20%"},attrs:{span:"1"}}),i("col",{staticStyle:{width:"25%"},attrs:{span:"1"}}),i("col",{staticStyle:{width:"40%"},attrs:{span:"1"}})]),i("thead",[i("tr",[i("th",{staticClass:"text-right"},[t._v(" 登船登记时间（本地） ")]),i("th",{staticClass:"text-left pl-5"},[t._v(" 目标 ")]),i("th",{staticClass:"text-left"},[t._v(" 航线 ")]),i("th",{staticClass:"text-left"},[t._v(" 航线线路 ")])])]),i("tbody",t._l(t.voyages,(function(e,n){return i("tr",{key:n},[i("td",[i("div",{staticClass:"d-flex justify-end"},[i("div",{style:e.showDay?"":"visibility: hidden"},[t._v(" "+t._s(e.day)+" ")]),i("div",{staticClass:"ml-1"},[t._v(t._s(e.time))])])]),i("td",[i("div",{staticClass:"d-flex align-center"},t._l(e.targets,(function(t){return i("div",{key:t.id,style:"item"===t.type?"padding-top: 4px":""},[i("item-icon",{attrs:{title:t.name,"icon-url":t.iconUrl,"icon-class":t.icon,cover:t.cover,type:t.type}})],1)})),0)]),i("td",[i("div",{staticClass:"d-flex align-center"},[i("div",[t._v(t._s(e.name))]),i("v-icon",[t._v(" "+t._s(e.shiftIcon)+" ")])],1)]),i("td",[i("div",{staticClass:"d-flex align-center"},t._l(e.voyageLocations,(function(e,n){return i("div",{key:n,staticClass:"d-flex align-center"},[0!==n?i("v-icon",{attrs:{color:"grey"}},[t._v("mdi-arrow-right")]):t._e(),i("div",{staticClass:"mx-1 d-flex align-center"},[i("span",[t._v(t._s(e.name))]),i("v-icon",{attrs:{title:e.hint}},[t._v(t._s(e.icon))])],1)],1)})),0)])])})),0)]},proxy:!0}])})],1)],1)],1)}),V=[],Y=i("8b70"),G=(i("c975"),i("ac1f"),i("466d"),i("d22a")),U={components:{ItemIcon:Y["a"]},props:{voyages:{type:Array,default:function(){return[]}},targetOptions:{type:Array,default:function(){return[]}}},data:function(){return{voyageNLazy:13,targets:[]}},computed:{selectionOptions:function(){return this.targetOptions.flatMap((function(t,e){return e?[{divider:!0},{header:t.type}].concat(Object(r["a"])(t.options)):[{header:t.type}].concat(Object(r["a"])(t.options))}))},voyageN:{get:function(){return this.voyageNLazy},set:function(t){var e=this;this.voyageNLazy=t,this.$nextTick((function(){var i=Math.floor(+t);i<1?i=1:i>100&&(i=100),e.voyageNLazy=i,e.filterChanged(i,e.targets)}))}}},methods:{targetsChanged:function(t){this.filterChanged(this.voyageN,t)},filterOptions:function(t,e,i){return"zh-CN"===this.$i18n.locale?!1!==G["a"].match(i,e):i.toLowerCase().indexOf(e.toLowerCase())>-1},filterChanged:function(t,e){this.$emit("filterChanged",{voyageN:t,voyageTypes:c.a.uniq(e.flatMap((function(t){return t.voyageTypes})))})}}},Z={name:"OceanFishingTimeTableLarge",components:{ItemIcon:Y["a"]},mixins:[U]},q=Z,B=i("2877"),J=Object(B["a"])(q,H,V,!1,null,"f5894c98",null),W=J.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-form",[i("v-container",[i("v-row",[i("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"3"}},[i("v-subheader",{staticStyle:{"min-width":"100px"}},[t._v("显示航班数")]),i("v-text-field",{attrs:{type:"number",solo:""},model:{value:t.voyageN,callback:function(e){t.voyageN=e},expression:"voyageN"}})],1),i("v-col",{staticClass:"d-flex",attrs:{cols:"12",md:"6"}},[i("v-subheader",{staticStyle:{"min-width":"100px"}},[t._v("筛选条件")]),i("v-autocomplete",{staticClass:"targetSelector",attrs:{items:t.selectionOptions,color:"blue-grey lighten-2",placeholder:t.$t("oceanFishing.targetFilterPlaceholder"),"item-text":"name","item-value":"id",multiple:"",clearable:"",chips:"","deletable-chips":"","return-object":"",solo:"",attach:".targetSelector"},on:{input:t.targetsChanged},scopedSlots:t._u([{key:"item",fn:function(e){return[e.item.header?[i("v-list-item-content",{domProps:{textContent:t._s(e.item.header)}})]:"locationShift"!==e.item.type?[i("v-list-item-content",[i("div",{staticClass:"d-flex align-center"},[i("item-icon",{attrs:{title:e.item.name,"icon-url":e.item.iconUrl,"icon-class":e.item.icon,type:e.item.type}}),i("div",[t._v(" "+t._s(e.item.name)+" ")])],1)])]:i("div",{staticClass:"d-flex align-center"},[i("v-icon",{staticClass:"mr-1"},[t._v(" "+t._s(e.item.icon)+" ")]),i("div",[t._v(" "+t._s(e.item.name)+" ")])],1)]}}]),model:{value:t.targets,callback:function(e){t.targets=e},expression:"targets"}})],1)],1)],1)],1),i("v-row",[i("v-col",{attrs:{cols:"12"}},[i("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[i("colgroup",[i("col",{staticStyle:{width:"40%"},attrs:{span:"1"}}),i("col",{staticStyle:{width:"40%"},attrs:{span:"1"}}),i("col",{staticStyle:{width:"20%"},attrs:{span:"1"}})]),i("thead",[i("tr",[i("th",{staticClass:"text-right"},[t._v("登船登记时间"),i("br"),t._v("（本地）")]),i("th",{staticClass:"text-left pl-5"},[t._v(" 目标 ")]),i("th",{staticClass:"text-left"},[t._v(" 航线 ")])])]),i("tbody",t._l(t.voyages,(function(e,n){return i("tr",{key:n},[i("td",[i("div",{staticClass:"d-flex justify-end"},[i("div",{style:e.showDay?"":"visibility: hidden"},[t._v(" "+t._s(e.day)+" ")]),i("div",{staticClass:"ml-1"},[t._v(t._s(e.time))])])]),i("td",[i("div",{staticClass:"d-flex align-center"},t._l(e.targets,(function(t){return i("div",{key:t.id,style:"item"===t.type?"padding-top: 4px":""},[i("item-icon",{attrs:{title:t.name,"icon-url":t.iconUrl,"icon-class":t.icon,cover:t.cover,type:t.type}})],1)})),0)]),i("td",[i("div",{staticClass:"d-flex align-center"},[i("div",[t._v(" "+t._s(e.simpleName)+" ")])])])])})),0)]},proxy:!0}])})],1)],1)],1)},Q=[],R={name:"OceanFishingTimeTableSmall",components:{ItemIcon:Y["a"]},mixins:[U]},X=R,tt=Object(B["a"])(X,K,Q,!1,null,"0dbaf088",null),et=tt.exports,it={name:"OceanFishingTimeTable",components:{OceanFishingTimeTableSmall:et,OceanFishingTimeTableLarge:W},props:{targets:{type:Array,default:void 0},voyageN:{type:Number},voyages:{type:Array,default:function(){return[]}},targetOptions:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{isMobile:function(){return this.$vuetify.breakpoint.mobile},componentType:function(){return this.isMobile?"OceanFishingTimeTableSmall":"OceanFishingTimeTableLarge"}},methods:{filterChanged:function(t){this.$emit("filterChanged",t)}}},nt=it,at=Object(B["a"])(nt,$,z,!1,null,"c6673034",null),ot=at.exports,rt=i("7a7d"),st={name:"OceanFishingPage",components:{OceanFishingTimeTable:ot},props:["now"],data:function(){return{achievementScore40:rt["a"].getImgUrl("ocean-fishing-score-achievement-40x40.png"),filter:{voyageN:13},lazyNow:this.now}},computed:Object(o["a"])({isMobile:function(){return this.$vuetify.breakpoint.mobile},voyages:function(){var t=this;return M.voyagesWithTipOf(M.shiftTimeForCheckInLimit(this.lazyNow),this.filter.voyageN,this.filter.voyageTypes).map((function(e,i){var n=0===i||0===ct(e.time).hour,a=e.voyageTip.achievements.map((function(e){return t.assembleAchievement(e)})).concat(e.locationTips.map((function(e){return{blueFish:t.assembleItem(e.blueFish)}})).flatMap((function(t){return[t.blueFish]}))).filter((function(t){return t}));return{showDay:n,simpleName:e.voyageSimpleName,day:D["a"].formatDateTime(e.time,"MM-dd"),time:D["a"].formatDateTime(e.time,"HH:mm"),shiftIcon:lt(e.shift.type),name:e.shift.name,targets:a,voyageLocations:e.locationTips.map((function(t){return{name:t.locationName,icon:lt(t.locationShift),hint:t.locationHint}}))}}))},targetOptions:function(){var t=this;return M.allTargets().map((function(e){return{type:e.type,options:e.options.map((function(e){return"item"===e.type?Object(o["a"])(Object(o["a"])({},t.assembleItem(e.id)),{},{voyageTypes:e.voyageTypes}):"achievement"===e.type?Object(o["a"])(Object(o["a"])({},t.assembleAchievement(e.id)),{},{voyageTypes:e.voyageTypes}):Object(o["a"])(Object(o["a"])({},e),{},{icon:lt(e.shift)})}))}}))}},Object(P["b"])(["getItemName","getItemIconClass","getAchievementName","getAchievementIconClass"])),watch:{now:function(t){t%9e5<2e3&&(this.lazyNow=t)}},methods:{assembleItem:function(t){return t&&{id:t,name:this.getItemName(t),icon:this.getItemIconClass(t),type:"item"}},assembleAchievement:function(t){return t&&{id:t,name:2562===t?"游钓大洋1-3(冲分)":this.getAchievementName(t),icon:this.getAchievementIconClass(t),iconUrl:2562===t?this.achievementScore40:null,type:"achievement"}},filterChanged:function(t){this.filter=t}}};function ct(t){return E["DateTime"].fromMillis(t).setZone(E["FixedOffsetZone"].instance(480))}function lt(t){var e=["mdi-weather-sunny","mdi-weather-sunset","mdi-weather-night"];return e[t]}var ut=st,mt=(i("a9f6"),Object(B["a"])(ut,n,a,!1,null,"2c9232db",null));e["default"]=mt.exports}}]);